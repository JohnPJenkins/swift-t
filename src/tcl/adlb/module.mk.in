
DIR := src/tcl/adlb

ADLB := @USE_ADLB@
MPI := @USE_MPI@

TCL_ADLB_SRC := $(DIR)/tcl-adlb.c

TURBINE_SRC += $(TCL_ADLB_SRC)

TCL_ADLB_OBJS := $(patsubst %.c, %.o, $(TCL_ADLB_SRC))

TCL_ADLB_SO = lib/libtcladlb.so

tcl_adlb: $(TCL_ADLB_SO)

$(TCL_ADLB_SO): $(TCL_ADLB_OBJS) lib
	$(Q) "  LINK		$(@)"
	$(E) gcc -shared -o $(@) $(TCL_LINK_FLAGS) \
		  $(TCL_ADLB_OBJS) \
		  -L $(ADLB) -l adlb \
		  -L $(MPI)/lib -l mpich -l mpl

clean::
	@rm -v $(TCL_ADLB_OBJS)
